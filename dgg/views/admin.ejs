<%- include('layout', { body: `
<h2>ğŸ‘‘ Admin Panel</h2>

<div class="card">
  <form method="POST" action="/admin/start">
    <button>DÃ©marrer une partie (1h)</button>
  </form>
</div>

<h3>Gestion des joueurs</h3>

${users.map(user => `
<div class="card">
  <strong>${user.username}</strong>

  ${user.missions.map(m => `
    <div style="margin-top:10px;">
      <strong>${m.difficulty.toUpperCase()}</strong>

      ${m.completed ? `
        <span style="color:lightgreen;">âœ” ValidÃ©e</span>
      ` : (m.failed ? `
        <span style="color:red;">âŒ RatÃ©e</span>
      ` : `
        <span style="color:orange;">En cours</span>
      `)}

      <form method="POST" action="/admin/reroll/${user._id}/${m._id}">
        <button style="background:#444;">ğŸ² Reroll</button>
      </form>

      ${m.completed ? `
        <form method="POST" action="/admin/invalidate/${user._id}/${m._id}">
          <button style="background:#aa0000;">Invalider</button>
        </form>
      ` : ``}

      ${m.failed ? `
        <form method="POST" action="/admin/reset/${user._id}/${m._id}">
          <button style="background:#aa0000;">RÃ©initialiser</button>
        </form>
      ` : ``}
    </div>
  `).join("")}
</div>
`).join("")}
` }) %>
